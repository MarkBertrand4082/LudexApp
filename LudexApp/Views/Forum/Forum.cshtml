@model LudexApp.Models.ViewModels.ForumViewModel

<h1>@Model.Name</h1>

<a asp-controller="Game"
   asp-action="Details"
   asp-route-id="@Model.GameId"
   class="btn btn-primary mb-3">
    ← Back to @Model.GameTitle
</a>

@if (!Model.Posts.Any())
{
    <p>No posts yet.</p>
}

<ul class="list-group mb-3">
    @foreach (var post in Model.Posts)
    {
        <li class="list-group-item d-flex justify-content-between">
            <a asp-controller="Forum"
               asp-action="Post"
               asp-route-forumId="@Model.Id"
               asp-route-postId="@post.Id">
                @post.Title
            </a>

            @if (post.CanDelete)
            {
                <form asp-controller="Forum"
                      asp-action="DeletePost"
                      method="post"
                      style="display:inline;">
                    <input type="hidden" name="postId" value="@post.Id" />
                    <button class="btn btn-danger btn-sm">Delete</button>
                </form>
            }
        </li>
    }
</ul>

@if (User.Identity?.IsAuthenticated ?? false)
{
    <h3>Create a New Post</h3>
    <form asp-controller="Forum"
          asp-action="CreatePost"
          method="post"
          class="mb-3">
        <input type="hidden" name="forumId" value="@Model.Id" />
        <input class="form-control mb-1" name="title" placeholder="Post title" required />
        <textarea class="form-control mb-1" name="content" placeholder="Content" required></textarea>
        <button class="btn btn-success">Create Post</button>
    </form>
}